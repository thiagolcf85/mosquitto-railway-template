# Configuração Eclipse Mosquitto otimizada para baixa latência no Railway
listener 1883 0.0.0.0
protocol mqtt

listener 9001 0.0.0.0
protocol websockets

# Autenticação
allow_anonymous false
password_file /mosquitto/config/password_file

# Desabilita persistência para melhorar latência
persistence false

# Configurações de performance validadas para Mosquitto 2.0
max_keepalive 65535
max_inflight_messages 100
max_inflight_bytes 0
max_queued_messages 5000
max_queued_bytes 0
queue_qos0_messages true

# Socket options para baixa latência
set_tcp_nodelay true

# Limites de tamanho
max_packet_size 268435456
memory_limit 536870912

# Configurações de conexão
max_connections -1
autosave_interval 1800
sys_interval 20

# Configuração para WebSocket
websockets_headers_size 4096

# Logging otimizado
log_dest stdout
log_type error
log_type warning
log_type notice