# Configuração do broker cache local para aceleração
listener 1883 0.0.0.0
protocol mqtt

# Cache local sem autenticação para performance máxima
allow_anonymous true

# Sem persistência para cache ultra-rápido
persistence false

# Configurações otimizadas para cache
set_tcp_nodelay true
max_inflight_messages 500
max_queued_messages 20000
queue_qos0_messages true

# Apenas QoS 0 para cache (máxima velocidade)
max_packet_size 67108864
memory_limit 536870912

# Configurações de conexão para cache
max_connections -1
sys_interval 5

# Bridge para o broker principal
connection cache_to_primary
address mosquitto-primary:1883
topic cache/# out 0 "" ""
topic live/# in 0 "" ""
username admin_mosquitto
password sl977w05jmmqzbgr4g4v27x4umxyf01z
keepalive_interval 30
restart_timeout 10

# Logging mínimo para performance
log_dest stdout
log_type error
log_type warning